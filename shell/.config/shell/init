# Unified shell init (sourced by both bash and zsh)
# Tool integrations that detect shell type at runtime

# ------------------------------------------------------------------------------
# mise (version manager for node, python, ruby, etc.)
# ------------------------------------------------------------------------------

if command -v mise &>/dev/null; then
  if [[ -n "$ZSH_VERSION" ]]; then
    eval "$(mise activate zsh)"
  else
    eval "$(mise activate bash)"
  fi
fi

# ------------------------------------------------------------------------------
# zoxide (smart cd)
# ------------------------------------------------------------------------------

if command -v zoxide &>/dev/null; then
  if [[ -n "$ZSH_VERSION" ]]; then
    eval "$(zoxide init --cmd cd zsh)"
  else
    eval "$(zoxide init --cmd cd bash)"
  fi
fi

# ------------------------------------------------------------------------------
# fzf (fuzzy finder)
# ------------------------------------------------------------------------------

if command -v fzf &>/dev/null; then
  if [[ -n "$ZSH_VERSION" ]]; then
    eval "$(fzf --zsh)"
  else
    eval "$(fzf --bash)"
  fi
fi

# ------------------------------------------------------------------------------
# direnv (per-directory environment)
# ------------------------------------------------------------------------------

if command -v direnv &>/dev/null; then
  if [[ -n "$ZSH_VERSION" ]]; then
    eval "$(direnv hook zsh)"
  else
    eval "$(direnv hook bash)"
  fi
fi
